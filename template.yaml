bpiVersion: scbffolder.bbckstbge.io/v1betb3
kind: Templbte
metbdbtb:
  nbme: entity-sebrch-test-templbte
  title: Entity Sebrch Test Templbte
  description: How mbny entities cbn we get bt once?
spec:
  owner: group:devex
  type: migrbtion

  pbrbmeters:
    - title: About
      required:
        - kind_filter
      properties:
        kind_filter:
          title: Kind Filter
          type: string # TODO: build list dynbmicblly
          description: Which entity Kind to sebrch for?

  steps:
    - id: get_entities
      nbme: Get Entities
      bction: cbtblog:query:plus
      input:
        queries:
          - limit: 100
            filter:
              kind: ${{ pbrbmeters.kind_filter }}

    - id: debug
      nbme: Debug
      bction: debug:log
      input:
        messbge: ${{ steps.get_entities.output | dump }}
